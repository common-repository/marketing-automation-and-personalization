"use strict";!function(i){var e=i(".wrap");function o(e,o){var o=1<arguments.length&&void 0!==o?o:{},n=o.reload,t=void 0===n||n,n=o.callback,c=void 0===n?null:n;i.post(ajaxurl,{action:e,nonce:convesioconvert.nonce},function(e){e.success&&t&&document.location.reload(),c&&c(e)})}function n(e,o){return(o=i.extend({resizable:!1,modal:!0,autoOpen:!1,draggable:!1,dialogClass:"convesioconvert-dialog-wrapper",width:400},o||{})).create=function(){var o=i(this);o.siblings(".ui-dialog-titlebar").remove(),o.find(".convesioconvert-dialog-close").click(function(e){e.preventDefault(),o.dialog("close")}),i(document).on("click",".ui-widget-overlay",function(){o.dialog("close")})},(e=i(e).dialog(o)).data("uiDialog")._focusTabbable=i.noop,e}var t,c,s;i(".convesioconvert-disconnect-confirm").on("click",function(e){e.preventDefault(),n("#convesioconvert-disconnect-dialog").dialog("open")}),i("#convesioconvert-disconnect-dialog").on("click",".convesioconvert-remove-integration",function(e){e.preventDefault(),o("convesioconvert_remove_integration")}),i(".convesioconvert-destroy-data-confirm").on("click",function(e){e.preventDefault(),n("#convesioconvert-destroy-data-dialog").dialog("open")}),i("#convesioconvert-destroy-data-dialog").on("click",".convesioconvert-destroy-data",function(e){e.preventDefault(),o("convesioconvert_destroy_data")}),e.on("click",".convesioconvert-pause-integration",function(e){e.preventDefault(),o("convesioconvert_pause_integration")}),e.on("click",".convesioconvert-resume-integration",function(e){e.preventDefault(),o("convesioconvert_resume_integration")}),["In Progress","Error"].includes(i("#admin-sync-status").text())&&(c=function(e){e.success&&e.level&&(clearInterval(t),document.location.reload())},s=5e3,"Error"==i("#admin-sync-status").text()&&(s=6e4),t=window.setInterval(function(){o("convesioconvert_get_health_level",{reload:!1,callback:c})},s)),i(".convesioconvert-help-icon").tooltip(),e.on("click","#convesioconvert-save-settings",function(e){e.preventDefault();var o=document.getElementById("convesioconvert-save-settings"),n=(o.disabled="disabled",{action:"convesioconvert_save_settings",nonce:convesioconvert.nonce}),t=(document.querySelectorAll('input[name^="convesioconvert_consent_"]').forEach(function(e){n[e.name]=e.checked}),n.convesioconvert_consent_statement=document.getElementById("convesioconvert_consent_statement").value,document.createElement("span"));t.classList.add("convesioconvert-results"),i.post(ajaxurl,n,function(e){o.removeAttribute("disabled"),e&&e.success?(t.classList.add("success"),t.innerText=convesioconvert.success_message):(t.classList.add("error"),t.innerText=convesioconvert.erorr_message),o.insertAdjacentElement("afterend",t),setTimeout(function(){t.innerText="",t.classList.remove("error","success")},1e3)})})}(jQuery);