"use strict";!function(e,n){function t(){elementor.hooks.addAction("panel/open_editor/widget/form",function(e,i,t){new(elementorModules.editor.utils.Module.extend({panel:null,getControl:function(e){if(this.panel)return this.panel.getCurrentPageView().collection.findWhere({name:e})},getControlView:function(e){if(this.panel)return e=this.getControl(e),this.panel.getCurrentPageView().children.findByModelCid(e.cid)},getControlValue:function(e){return this.getControlView(e).getControlValue()},getElementSettings:function(e,t){if(!e)return null;e=e.get("settings").get(t);return e instanceof n.Backbone.Collection?e.toJSON():e}}).extend({onInit:function(){elementor.channels.editor.on("section:activated",this.onSectionActivated)},getRepeaterItemsByLabel:function(e){var t={};return this.getElementSettings(this.model,e).forEach(function(e){t[e.custom_id]=0<e.field_label.length?e.field_label:e.custom_id}),t}}).extend({panel:e,model:i,action:"convesioconvert",onSectionActivated:function(e,t){var n=this;e==="section_".concat(this.action)&&t.model.id===i.get("id")&&(this.getControlView("convesioconvert_mapping_fields").on("add:child",function(){n.updateFieldMapping()}),this.updateFieldMapping())},updateFieldMapping:function(){var i=this,o=this.getControlView("convesioconvert_mapping_fields");o.children.each(function(e){e.children.each(function(e){var t=e.model.get("name"),n=e.model,t=("convesioconvert_attribute"===t||"convesioconvert_form_field"===t&&n.set("options",i.getFormFields()),e.render(),o.$el.find("select"));Array.from(t).forEach(function(e){e.selectedIndex<0&&(e.selectedIndex=0)})})})},onElementChange:function(){this.updateFieldMapping()},getRemoteFields:function(){},getFormFields:function(){return _.extend({},{"":"- None -"},this.getRepeaterItemsByLabel("form_fields"))}}))({$element:t.$el})}),elementor.hooks.addAction("panel/open_editor/widget/raven-form",function(e,i,t){new(elementorModules.editor.utils.Module.extend({panel:null,getControl:function(e){if(this.panel)return this.panel.getCurrentPageView().collection.findWhere({name:e})},getControlView:function(e){if(this.panel)return e=this.getControl(e),this.panel.getCurrentPageView().children.findByModelCid(e.cid)},getControlValue:function(e){return this.getControlView(e).getControlValue()},getElementSettings:function(e,t){if(!e)return null;e=e.get("settings").get(t);return e instanceof n.Backbone.Collection?e.toJSON():e}}).extend({selectOptions:{default:{"":"Select one"},fetching:{fetching:"Fetching..."},noList:{no_list:"No list found"}},action:null,onInit:function(){var n=this;elementor.channels.editor.on("section:activated",this.onSectionActivated),this.onElementChange&&elementor.channels.editor.on("change",function(e,t){n.onElementChange(e.model.get("name"),e,t)})},updateList:function(e){this.setOptions(this.selectOptions.fetching),this.setSelectedOption(),wp.ajax.send("raven_form_editor",{data:_.extend({},{params:e},{service:this.action,request:"get_list"}),success:this.doSuccess})},updateFieldMapping:function(){var o=this;_.each(o.fields,function(e,t){var n=o.getControl(t),t=o.getControlView(t),i={},e=o.getRepeaterItemsByLabel("fields",e.filter);_.extend(i,o.selectOptions.default,e),o.setOptions(i,n,t)})},getListControl:function(){return this.getControl("".concat(this.action,"_list"))},getListControlView:function(){return this.getControlView("".concat(this.action,"_list"))},setOptions:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;null===t&&(t=this.getListControl(),n=this.getListControlView()),t.set("options",e),n.render()},setSelectedOption:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.getListControlView().$el.find("select").prop("selectedIndex",e)},getRepeaterItemsByLabel:function(e,t){var n={},e=this.getElementSettings(this.model,e);return _.filter(e,function(e){t&&e.type!==t||(n[e._id]=e.label)}),n}}).extend({panel:e,model:i,action:"convesioconvert",onSectionActivated:function(e,t){var n=this;e==="section_".concat(this.action)&&t.model.id===i.get("id")&&(this.getControlView("convesioconvert_mapping_fields").on("add:child",function(){n.updateFieldMapping()}),this.updateFieldMapping())},updateFieldMapping:function(){var i=this,o=this.getControlView("convesioconvert_mapping_fields");o.children.each(function(e){e.children.each(function(e){var t=e.model.get("name"),n=e.model,t=("convesioconvert_attribute"===t||"convesioconvert_form_field"===t&&n.set("options",i.getFormFields()),e.render(),o.$el.find("select"));Array.from(t).forEach(function(e){e.selectedIndex<0&&(e.selectedIndex=0)})})})},onElementChange:function(){this.updateFieldMapping()},getRemoteFields:function(){},getFormFields:function(){return _.extend({},{"":"- None -"},this.getRepeaterItemsByLabel("fields"))}}))({$element:t.$el})})}e(n).on("elementor:init",function(){elementor.on("frontend:init",t)})}(jQuery,window);